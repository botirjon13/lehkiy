{% extends "base.html" %}
{% block content %}

<div class="dash-head">
  <div>
    <h2 class="dash-title">Xush kelibsiz</h2>
    <p class="dash-sub">
      Foydalanuvchi:
      <strong>{{ user.username }}</strong>
      <span class="tag">{{ user.role }}</span>
    </p>
  </div>

  <div class="dash-actions">
    <a class="btn btn-secondary" href="{{ url_for('products_upload') }}">Excel yuklash</a>
    <a class="btn" href="{{ url_for('sales_new') }}">Savdo boshlash</a>
  </div>
</div>

<div class="cards">
  <a class="card-link" href="{{ url_for('products') }}">
    <div class="card-top">
      <div class="icon-badge">ðŸ“¦</div>
      <div class="card-meta">
        <h3>Mahsulotlar</h3>
        <p>Ombor holati, qoâ€˜shish va boshqarish.</p>
      </div>
    </div>
    <div class="card-bottom">
      <span class="mini">Omborga oâ€˜tish</span>
      <span class="arrow">â†’</span>
    </div>
  </a>

  <a class="card-link" href="{{ url_for('sales_new') }}">
    <div class="card-top">
      <div class="icon-badge">ðŸ›’</div>
      <div class="card-meta">
        <h3>Savdo</h3>
        <p>Savatcha orqali sotuvni boshlash va yakunlash.</p>
      </div>
    </div>
    <div class="card-bottom">
      <span class="mini">Savdo oynasi</span>
      <span class="arrow">â†’</span>
    </div>
  </a>

  <a class="card-link" href="{{ url_for('stats_home') }}">
    <div class="card-top">
      <div class="icon-badge">ðŸ“Š</div>
      <div class="card-meta">
        <h3>Statistika</h3>
        <p>Kunlik/oylik/yillik hisobotlar va chek qidirish.</p>
      </div>
    </div>
    <div class="card-bottom">
      <span class="mini">Hisobotlar</span>
      <span class="arrow">â†’</span>
    </div>
  </a>

  <a class="card-link" href="{{ url_for('debts') }}">
    <div class="card-top">
      <div class="icon-badge">ðŸ§¾</div>
      <div class="card-meta">
        <h3>Qarzdorlar</h3>
        <p>Qarzdorlar roâ€˜yxati va Excel eksport.</p>
      </div>
    </div>
    <div class="card-bottom">
      <span class="mini">Roâ€˜yxatni koâ€˜rish</span>
      <span class="arrow">â†’</span>
    </div>
  </a>
</div>

{% if user.role == 'admin' %}
<div class="admin-strip">
  <div>
    <h3>Admin rejim</h3>
    <p>Sotuvchilarni yaratish va nazorat qilish.</p>
  </div>
  <a class="btn btn-secondary" href="{{ url_for('admin_users') }}">Sotuvchilar</a>
</div>
{% endif %}

<style>
  /* Dashboard-only premium styles (base.html tizimiga mos) */
  .dash-head{
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap:14px;
    margin-bottom:18px;
  }
  .dash-title{
    margin:0 0 6px 0;
    font-size:26px;
    letter-spacing:.2px;
  }
  .dash-sub{
    margin:0;
    color:rgba(229,231,235,.78);
    font-size:14px;
  }
  .dash-actions{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }

  .cards{
    display:grid;
    grid-template-columns:repeat(2, minmax(0, 1fr));
    gap:14px;
    margin-top:12px;
  }

  .card-link{
    display:block;
    padding:16px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.10);
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    transition: transform .15s ease, border-color .15s ease, background .15s ease;
  }
  .card-link:hover{
    transform: translateY(-2px);
    border-color: rgba(79,70,229,.35);
    background:linear-gradient(180deg, rgba(79,70,229,.14), rgba(255,255,255,.03));
  }

  .card-top{
    display:flex;
    align-items:flex-start;
    gap:12px;
  }
  .icon-badge{
    width:44px; height:44px;
    border-radius:14px;
    display:grid;
    place-items:center;
    background: rgba(255,255,255,.06);
    border: 1px solid rgba(255,255,255,.10);
    font-size:18px;
    flex:0 0 auto;
  }
  .card-meta h3{
    margin:0 0 6px 0;
    font-size:16px;
  }
  .card-meta p{
    margin:0;
    color: rgba(229,231,235,.72);
    font-size:13px;
    line-height:1.45;
  }

  .card-bottom{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:14px;
    padding-top:12px;
    border-top:1px solid rgba(255,255,255,.08);
    color: rgba(229,231,235,.75);
    font-size:13px;
  }
  .arrow{
    font-weight:800;
    color: rgba(229,231,235,.9);
  }

  .admin-strip{
    margin-top:16px;
    padding:16px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.04);
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
  }
  .admin-strip h3{
    margin:0 0 6px 0;
    font-size:16px;
  }
  .admin-strip p{
    margin:0;
    color: rgba(229,231,235,.72);
    font-size:13px;
  }

  @media (max-width: 820px){
    .cards{ grid-template-columns: 1fr; }
    .dash-head{ align-items:flex-start; flex-direction:column; }
  }
</style>

{% endblock %}
