<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Do'kon Paneli</title>

  <style>
    :root{
      --bg: #0b1220;
      --surface: rgba(255,255,255,.08);
      --card: #0f172a;
      --card-2: #111c33;
      --text: #e5e7eb;
      --muted: rgba(229,231,235,.72);
      --line: rgba(255,255,255,.10);
      --shadow: 0 18px 60px rgba(0,0,0,.35);

      --primary: #4f46e5;
      --primary-2: #4338ca;

      --success: #16a34a;
      --success-bg: rgba(22,163,74,.12);

      --danger: #ef4444;
      --danger-bg: rgba(239,68,68,.12);

      --warn: #f59e0b;
      --warn-bg: rgba(245,158,11,.12);

      --radius: 16px;
      --radius-sm: 12px;

      --maxw: 1120px;
      --pad: 18px;
      --pad-lg: 22px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(79,70,229,.35), transparent 55%),
        radial-gradient(900px 600px at 90% 10%, rgba(16,185,129,.20), transparent 45%),
        radial-gradient(900px 600px at 50% 100%, rgba(239,68,68,.14), transparent 50%),
        var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a { color: inherit; text-decoration: none; }
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

    /* Header / Nav */
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(12px);
      background: linear-gradient(to bottom, rgba(15,23,42,.78), rgba(15,23,42,.52));
      border-bottom: 1px solid var(--line);
    }

    .nav-wrap {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 12px var(--pad);
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 190px;
      font-weight: 800;
      letter-spacing: .2px;
    }

    .brand-badge{
      width: 34px; height: 34px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(79,70,229,.95), rgba(16,185,129,.75));
      box-shadow: 0 12px 26px rgba(79,70,229,.25);
      display: grid;
      place-items: center;
      font-weight: 900;
      color: #fff;
      user-select: none;
    }

    nav {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 2px;
    }

    nav::-webkit-scrollbar { height: 6px; }
    nav::-webkit-scrollbar-thumb { background: rgba(255,255,255,.10); border-radius: 999px; }
    nav::-webkit-scrollbar-track { background: transparent; }

    .nav-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 12px;
      color: rgba(229,231,235,.86);
      border: 1px solid transparent;
      transition: background .15s ease, border-color .15s ease, transform .15s ease;
      white-space: nowrap;
      font-size: 14px;
    }

    .nav-link:hover{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.10);
      transform: translateY(-1px);
    }

    /* Active link via aria-current (optional). If you don't set it, everything still looks fine. */
    .nav-link[aria-current="page"]{
      background: rgba(79,70,229,.20);
      border-color: rgba(79,70,229,.38);
      color: #fff;
    }

    .nav-right{
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .pill{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: rgba(229,231,235,.86);
      font-size: 12px;
      white-space: nowrap;
    }

    /* Main container */
    .container {
      max-width: var(--maxw);
      margin: 20px auto;
      padding: 0 var(--pad);
    }

    .shell {
      background: linear-gradient(180deg, rgba(17,28,51,.75), rgba(15,23,42,.75));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: var(--pad-lg);
    }

    /* Flash */
    .flash {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--line);
      margin-bottom: 14px;
      background: rgba(255,255,255,.06);
      color: rgba(229,231,235,.92);
    }
    .flash.success { background: var(--success-bg); border-color: rgba(22,163,74,.30); }
    .flash.error { background: var(--danger-bg); border-color: rgba(239,68,68,.28); }
    .flash.warning { background: var(--warn-bg); border-color: rgba(245,158,11,.28); }

    /* Common UI (forms/tables/buttons) */
    .grid {
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    label {
      display: block;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
      font-weight: 650;
    }

    input, select, textarea {
      width: 100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline: none;
      font-size: 14px;
      transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
    }

    input::placeholder, textarea::placeholder { color: rgba(229,231,235,.55); }

    input:focus, select:focus, textarea:focus {
      border-color: rgba(79,70,229,.55);
      box-shadow: 0 0 0 4px rgba(79,70,229,.18);
      background: rgba(255,255,255,.08);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid transparent;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
      color: #fff;
      background: var(--primary);
      transition: transform .15s ease, background .15s ease, box-shadow .15s ease, opacity .15s ease;
      user-select: none;
    }

    .btn:hover { background: var(--primary-2); transform: translateY(-1px); box-shadow: 0 12px 28px rgba(79,70,229,.25); }
    .btn:active { transform: translateY(0); opacity: .95; }

    .btn-secondary { background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.14); }
    .btn-secondary:hover { background: rgba(255,255,255,.14); box-shadow: 0 12px 28px rgba(0,0,0,.25); }

    .btn-danger { background: var(--danger); }
    .btn-danger:hover { background: #dc2626; box-shadow: 0 12px 28px rgba(239,68,68,.22); }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(229,231,235,.86);
      white-space: nowrap;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      overflow: hidden;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }

    th, td {
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      text-align: left;
      font-size: 14px;
      vertical-align: middle;
    }

    th {
      font-size: 12px;
      letter-spacing: .3px;
      text-transform: uppercase;
      color: rgba(229,231,235,.70);
      background: rgba(255,255,255,.04);
    }

    tr:hover td { background: rgba(255,255,255,.04); }

    .table-wrap { overflow-x: auto; border-radius: 14px; }
    .table-wrap::-webkit-scrollbar { height: 8px; }
    .table-wrap::-webkit-scrollbar-thumb { background: rgba(255,255,255,.12); border-radius: 999px; }
    .table-wrap::-webkit-scrollbar-track { background: transparent; }

    hr {
      border: none;
      border-top: 1px solid rgba(255,255,255,.10);
      margin: 18px 0;
    }

    @media (max-width: 640px){
      .brand { min-width: auto; }
      .pill { display: none; }
      .shell { padding: 16px; }
      th, td { padding: 10px; }
    }
  </style>
</head>

<body>
<header>
  <div class="nav-wrap">
    <a class="brand" href="{{ url_for('dashboard') }}">
      <span class="brand-badge">SR</span>
      <span>SRM Do‘kon</span>
    </a>

    <nav aria-label="Asosiy menyu">
      <a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a>
      <a class="nav-link" href="{{ url_for('products') }}">Mahsulotlar</a>
      <a class="nav-link" href="{{ url_for('sales_new') }}">Savdo</a>
      <a class="nav-link" href="{{ url_for('stats_home') }}">Statistika</a>
      <a class="nav-link" href="{{ url_for('debts') }}">Qarzdorlar</a>
      {% if session.get('user', {}).get('role') == 'admin' %}
      <a class="nav-link" href="{{ url_for('admin_users') }}">Sotuvchilar</a>
      {% endif %}
      <a class="nav-link" href="{{ url_for('logout') }}">Chiqish</a>
    </nav>

    <div class="nav-right">
      {% if session.get('user') %}
        <span class="pill">
          {{ session.get('user', {}).get('username', 'user') }}
          ·
          {{ session.get('user', {}).get('role', '') }}
        </span>
      {% endif %}
    </div>
  </div>
</header>

<div class="container">
  <div class="shell">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>
</div>

</body>
</html>
